<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Anime Recommender</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <div class="container">
        <header>
            <h1>AI Anime Recommender</h1>
            <p class="subtitle">Discover your next favorite anime with the power of AI</p>
        </header>

        <form class="search-box" method="POST">
            <input type="text" name="user_input"
                placeholder="Describe what you want to watch... (e.g., 'A cyberpunk thriller with deep plot')"
                value="{{ last_input }}" required>
            <button type="submit"><i class="fas fa-magic"></i> Recommend</button>
        </form>

        {% if recommendations %}
        <h2 class="section-title">üîç Recommended for You</h2>

        <div class="results">
            {% for anime in recommendations %}
            <a href="{{ anime.siteUrl }}" target="_blank">
                <div class="card">
                    <div class="card-image-wrapper">
                        <img src="{{ anime.coverImage.large }}" alt="{{ anime.title.romaji }}">
                    </div>
                    <div class="score-badge">{{ anime.averageScore or 'N/A' }}%</div>
                    <div class="card-content">
                        <div class="card-title">{{ anime.title.english or anime.title.romaji }}</div>
                        <div class="desc">
                            {{ anime.description | safe }}
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>

        <div style="text-align: center;">
            <a href="/" class="back-link">‚Üê Back to Home</a>
        </div>

        {% else %}

        <h2 class="section-title trending">üî• Trending Now</h2>

        <div class="results">
            {% for anime in trending %}
            <a href="{{ anime.siteUrl }}" target="_blank">
                <div class="card">
                    <div class="card-image-wrapper">
                        <img src="{{ anime.coverImage.large }}" alt="{{ anime.title.romaji }}">
                    </div>
                    <div class="score-badge" style="color: #f472b6; border-color: rgba(244, 114, 182, 0.3);">{{
                        anime.averageScore or 'N/A' }}%</div>
                    <div class="card-content">
                        <div class="card-title">{{ anime.title.english or anime.title.romaji }}</div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>

        <h2 class="section-title popular">üåü Popular Currently</h2>

        <div class="results">
            {% for anime in popular %}
            <a href="{{ anime.siteUrl }}" target="_blank">
                <div class="card">
                    <div class="card-image-wrapper">
                        <img src="{{ anime.coverImage.large }}" alt="{{ anime.title.romaji }}">
                    </div>
                    <div class="score-badge" style="color: #fbbf24; border-color: rgba(251, 191, 36, 0.3);">{{
                        anime.averageScore or 'N/A' }}%</div>
                    <div class="card-content">
                        <div class="card-title">{{ anime.title.english or anime.title.romaji }}</div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>

        {% endif %}
    </div>

</body>

</html>